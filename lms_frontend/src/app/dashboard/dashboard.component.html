<!-- <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-between mb-2">
    <a class="navbar-brand ml-2">Dashboard</a>
    <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav mr-auto">

        </ul>
        <button class="btn btn-light" type="button" id="dropdownMenuButton1" aria-expanded="false">
            <i class="fal fa-solid fa-bell"> 4</i>
        </button>
        <span class="mr-2">

            <div ngbDropdown class="dropdown">
                <button ngbDropdownToggle class="btn btn-light" type="button" id="dropdownMenuButton1"
                    aria-expanded="false">
                    <i class="fal fa-solid fa-user"></i>
                </button>

                <ul ngbDropdownMenu aria-labelledby="dropdownMenuButton1" class="dropdown-menu dropdown-menu-end">
                    <li><a ngbDropdownItem href="#"
                        [routerLink]="['/userprofile',loggedUser.userId]">{{this.loggedUser.userName}}</a></li>
                    <div class="dropdown-divider"></div>
                    <li><a ngbDropdownItem href="#" style="color: red;" (click)="logoutUser()">Logout <i
                                class="fal fa-sign-out-alt"></i></a></li>
                </ul>
            </div>
        </span>
    </div>
</nav> -->
<app-header [heading]="'Dashboard'"></app-header>
<!-- <h1>Dashboard</h1> -->
<div class="jumbotron">
    <div class="row w-100">
        <div class="col-sm-2">
            <div class="card all-hover border-info mx-sm-6 p-7">
                <div class="text-info text-center mt-3">
                    <h4>All</h4>
                </div>
                <div class="text-info text-center mt-2">
                    <h1>{{this.allbookscount$ | async | json}}</h1>
                </div>
                <a (click)=all_books() class="stretched-link"></a>
            </div>
        </div>

        <div class="col-sm-2">
            <div class="card i-hover border-warning mx-sm-6 p-7">
                <div class="text-warning text-center mt-3">
                    <h4>Issued</h4>
                </div>
                <div class="text-warning text-center mt-2">
                    <h1>{{this.issuedbookcount$ | async | json}}</h1>
                </div>
                <a (click)=issued_books() class="stretched-link"></a>
            </div>
        </div>

        <div class="col-sm-2">
            <div class="card r-hover border-success mx-sm-6 p-7">
                <div class="text-success text-center mt-3">
                    <h4>Returned</h4>
                </div>
                <div class="text-success text-center mt-2">
                    <h1>{{this.returnedbookcount$ | async | json}}</h1>
                </div>
                <a (click)=returned_books() class="stretched-link"></a>
            </div>
        </div>

        <div class="col-sm-2">
            <div class="card p-hover border-danger mx-sm-6 p-7">
                <div class="text-danger text-center mt-3">
                    <h4>Delayed</h4>
                </div>
                <div class="text-danger text-center mt-2">
                    <h1>{{this.pendingsbookcount$! | async| json}}</h1>
                </div>
                <a (click)=pending_books() class="stretched-link"></a>
            </div>
        </div>

        <div class="col-sm-2">
            <div class="card p-hover border-danger mx-sm-6 p-7">
                <div class="text-danger text-center mt-3">
                    <h4>Delayed</h4>
                </div>
                <div class="text-danger text-center mt-2">

                    <h1>{{this.pendingsbookcount$! | async| json}}</h1>
                </div>
                <a (click)=pending_books() class="stretched-link"></a>
            </div>
        </div>
    </div>
</div>
<br>
<h2>{{title}} Books</h2>
<div *ngIf="(this.issuebookdetails$ | async).length===0;else elseBlock">
    <h4>No data to display...</h4>
</div>
<ng-template #elseBlock>
    <table class="datatable">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Book Name</th>
                <th scope="col">Authors</th>
                <th scope="col">Issued Date</th>
                <th scope="col">Issued End Date</th>
                <th scope="col">Returned Date</th>
                <th *ngIf="show==1" scope="col">Operations</th>
            </tr>
        </thead>
        <!-- {{issuebookdetails$}} -->
        <tbody>
            <!-- <tr *ngFor="let issuebook of issuebookdetails$ | async;let i = index"> -->
            <tr *ngFor="let issuebook of issuebookdetails$  | async;let i = index">
                <td>{{i+1}}</td>
                <td>{{issuebook.bookTitle}}</td>
                <td>{{issuebook.authors}}</td>
                <td>{{issuebook.issueDate}}</td>
                <td>{{issuebook.issueEndDate}}</td>
                <td *ngIf="issuebook.returnDate;else elseBlock">{{issuebook.returnDate}}</td>


                <ng-template #elseBlock>
                    <td>Book not returned</td>
                </ng-template>
                <td *ngIf="show===1">
                    <div *ngIf="issuebook.returnDate===null;else elseBlock1">
                        <button class="btn btn-light btn-sm"
                            (click)="returnbook(issuebook.issue_id)">Return</button>&nbsp;
                        <button class="btn btn-light btn-sm" (click)="extenddatebook(issuebook.issue_id) "
                            [disabled]=!issuebook.isExtendable>Extend</button>
                    </div>
                    <ng-template #elseBlock1>
                        Returned
                    </ng-template>
                </td>
            </tr>
        </tbody>

    </table>
</ng-template>
<app-footer-component></app-footer-component>